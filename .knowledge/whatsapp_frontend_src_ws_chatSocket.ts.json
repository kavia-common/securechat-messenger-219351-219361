{"is_source_file": true, "format": "TypeScript", "description": "This file implements a WebSocket client using SignalR for real-time chat communication in the frontend of a chat application. It manages connection states, message handling, group joins/leaves, and event listeners.", "external_files": ["../config", "../storage", "../types", "@microsoft/signalr"], "external_methods": ["storage.getToken"], "published": ["chatSocket"], "classes": [{"name": "ChatSocket", "description": "A class that manages SignalR connection, event handling, and message exchange for chat functionality."}], "methods": [{"name": "addListener", "description": "Registers an event listener for chat socket events."}, {"name": "emit", "description": "Internal method that broadcasts events to all registered listeners."}, {"name": "connect", "description": "Establishes a connection to the SignalR chat hub with authentication token."}, {"name": "disconnect", "description": "Terminates the SignalR connection."}, {"name": "joinConversation", "description": "Subscribes the client to a specific chat conversation group."}, {"name": "leaveConversation", "description": "Unsubscribes the client from a chat conversation group."}, {"name": "sendText", "description": "Sends a text message to a specific conversation through SignalR."}], "calls": ["this.conn.onclose", "this.conn.onreconnecting", "this.conn.onreconnected", "this.conn.on", "this.conn.start", "this.conn.stop", "this.conn.invoke"], "search-terms": ["ChatSocket", "signalR connect", "websocket chat client", "SignalR message handling", "chat group join leave"], "state": 2, "file_id": 11, "knowledge_revision": 78, "git_revision": "351a54e214f9554be6d8c5ee5a56b787657e4076", "revision_history": [{"23": ""}, {"54": ""}, {"78": "351a54e214f9554be6d8c5ee5a56b787657e4076"}], "ctags": [{"_type": "tag", "name": "ChatEvent", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^export type ChatEvent =$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ChatSocket", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^class ChatSocket {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "Listener", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^type Listener = (e: ChatEvent) => void;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "chatId", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^        const chatId = (m as any).conversationId || (m as any).chatId || '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "chatSocket", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^export const chatSocket = new ChatSocket();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "m", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^        const m = msg as Message & { conversationId?: string };$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/ws/chatSocket.ts", "pattern": "/^    const url = CONFIG.WS_URL; \\/\\/ ws:\\/\\/localhost:3001\\/ws\\/chat$/", "language": "TypeScript", "kind": "constant"}], "hash": "76bda2954895fa09f70c16f1ca234d6f", "format-version": 4, "code-base-name": "whatsapp_frontend", "filename": "whatsapp_frontend/src/ws/chatSocket.ts"}