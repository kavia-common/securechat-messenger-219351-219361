{"is_source_file": true, "format": "TypeScript / React Native TSX", "description": "This file defines a React Native chat screen component, 'ChatScreen', which manages displaying messages, sending text and images, connecting to a chat socket, and handling notifications within a chat conversation identified by chatId.", "external_files": ["../../theme/colors", "../../components/MessageBubble", "../../api/client", "../../ws/chatSocket", "../../services/notifications", "../../types"], "external_methods": ["api.getMessages", "api.sendMessage", "api.uploadMedia", "chatSocket.connect", "chatSocket.joinConversation", "chatSocket.leaveConversation", "chatSocket.addListener", "chatSocket.sendText", "showMessageNotification"], "published": [], "classes": [], "methods": [{"name": "onSendText", "description": "Handles sending of a text message, attempts to send via WebSocket first, falls back to API call if necessary, then updates message list and scrolls chat view."}, {"name": "onAttachImage", "description": "Handles attaching an image: requests permission, allows user to select media, uploads the media, sends message with media URL, updates message list, and scrolls chat view."}], "calls": ["api.getMessages", "chatSocket.connect", "chatSocket.joinConversation", "chatSocket.leaveConversation", "chatSocket.addListener", "chatSocket.sendText", "api.sendMessage", "api.uploadMedia", "showMessageNotification"], "search-terms": ["ChatScreen", "message handling", "React Native chat", "websocket chat integration", "image attachment"], "state": 2, "file_id": 20, "knowledge_revision": 79, "git_revision": "351a54e214f9554be6d8c5ee5a56b787657e4076", "revision_history": [{"41": ""}, {"59": ""}, {"61": ""}, {"79": "351a54e214f9554be6d8c5ee5a56b787657e4076"}], "ctags": [], "hash": "0ea8fe95670ebb1f1fa9ddb6bf549005", "format-version": 4, "code-base-name": "whatsapp_frontend", "filename": "whatsapp_frontend/src/screens/Chats/ChatScreen.tsx"}