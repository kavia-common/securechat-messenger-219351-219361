{"is_source_file": true, "format": "TypeScript", "description": "This file defines an API client module for a chat application, providing methods for user authentication, chat and message handling, contact management, media upload, and push notification registration. It primarily abstracts HTTP requests to the backend API endpoints.", "external_files": ["../config", "../storage", "../types"], "external_methods": ["storage.getToken()"], "published": ["api"], "classes": [], "methods": [{"name": "async function request<T>(path: string, method: HttpMethod = 'GET', body?: unknown, extraHeaders/ request", "description": "Performs an HTTP request to the specified API endpoint, handling headers, response parsing, and error handling.", "scope": "", "scopeKind": ""}, {"name": "api.login", "description": "Authenticates a user with email and password, retrieves token and user info."}, {"name": "api.register", "description": "Registers a new user and retrieves token and user info."}, {"name": "api.me", "description": "Fetches the current authenticated user's profile."}, {"name": "api.listChats", "description": "Retrieves a list of chat conversations for the current user."}, {"name": "api.getMessages", "description": "Fetches messages for a specific chat with pagination support."}, {"name": "api.sendMessage", "description": "Sends a message (text or image) in a specified chat."}, {"name": "api.listContacts", "description": "Lists user contacts."}, {"name": "api.searchUsers", "description": "Searches for users based on a query string."}, {"name": "api.addContact", "description": "Creates or retrieves a direct conversation with a user, returning contact info."}, {"name": "api.uploadMedia", "description": "Uploads media files and returns an accessible URL via message."}, {"name": "api.registerPushToken", "description": "Registers a push notification token with the backend."}], "calls": ["fetch", "storage.getToken()", "request"], "search-terms": ["client API", "chat endpoints", "media upload", "authentication methods", "push notification registration", "direct conversations"], "state": 2, "file_id": 10, "knowledge_revision": 106, "git_revision": "9f144a58faee820c350dff6ddd3bf152be99c11c", "revision_history": [{"21": ""}, {"51": ""}, {"77": "351a54e214f9554be6d8c5ee5a56b787657e4076"}, {"102": "9f144a58faee820c350dff6ddd3bf152be99c11c"}, {"103": "9f144a58faee820c350dff6ddd3bf152be99c11c"}, {"105": "9f144a58faee820c350dff6ddd3bf152be99c11c"}, {"106": "9f144a58faee820c350dff6ddd3bf152be99c11c"}], "ctags": [{"_type": "tag", "name": "HttpMethod", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^type HttpMethod = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "SendMessagePayload", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^type SendMessagePayload = { type: MessageType; content?: string; mediaUrl?: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^export const api = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^      const data = (await res.json()) as { message?: string };$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^  async login(email: string, password: string) {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^    const msg = (await res.json()) as Message;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^async function request<T>(path: string, method: HttpMethod = 'GET', body?: unknown, extraHeaders/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^  const res = await fetch(`${CONFIG.API_BASE_URL}${path}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/securechat-messenger-219351-219361/whatsapp_frontend/src/api/client.ts", "pattern": "/^  const token = await storage.getToken();$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}], "hash": "a3e4e957ff2bb3fd955943187a19b07d", "format-version": 4, "code-base-name": "whatsapp_frontend", "filename": "whatsapp_frontend/src/api/client.ts"}